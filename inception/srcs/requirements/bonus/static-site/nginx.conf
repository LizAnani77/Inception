# ================================
# CONFIGURATION NGINX POUR SITE STATIQUE
# ================================

# Section events : configuration des connexions et des workers
# Bloc requis m√™me s'il est vide - utilise les valeurs par d√©faut
events {}

# Section http : configuration du serveur web HTTP/HTTPS
http {
    # ================================
    # üåê SERVEUR POUR SITE STATIQUE
    # ================================
    
    server {
        # √âcoute sur le port 443 avec SSL/TLS activ√©
        # Port standard pour HTTPS - conforme aux exigences d'Inception
        listen 443 ssl;
        
        # Nom de domaine pour ce serveur de site statique
        # Sous-domaine d√©di√© au contenu statique (service bonus)
        server_name static.lanani-f.42.fr;
        
        # Chemin vers le certificat SSL public
        # Utilise le m√™me certificat que le serveur principal
        ssl_certificate     /etc/nginx/ssl/server.crt;
        
        # Chemin vers la cl√© priv√©e SSL
        # Doit √™tre gard√©e secr√®te et s√©curis√©e
        ssl_certificate_key /etc/nginx/ssl/server.key;
        
        # Protocoles SSL/TLS autoris√©s
        # TLSv1.2 et TLSv1.3 sont les versions s√©curis√©es modernes
        ssl_protocols TLSv1.2 TLSv1.3;
        
        # R√©pertoire racine du site statique
        # Correspond au volume static_data mont√© depuis docker-compose.yml
        root /var/www/static;
        
        # Fichier d'index par d√©faut
        # index.html est le fichier principal pour un site statique
        index index.html;
        
        # Gestion des URLs pour le site statique
        location / {
            # try_files : essaie les fichiers dans l'ordre donn√©
            # $uri : URL demand√©e telle quelle
            # $uri/ : URL avec un slash final (pour les dossiers)
            # /index.html : fallback vers la page d'accueil si rien n'est trouv√©
            # Id√©al pour les Single Page Applications (SPA)
            try_files $uri $uri/ /index.html;
        }
    }
}